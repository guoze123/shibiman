<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="renderer" content="webkit" />

    <title>诗碧曼</title>

    <meta name="keywords" content="H+" />
    <meta name="description" content="H+" />
    <!--[if lt IE 9]>
      <meta http-equiv="refresh" content="0;ie.html" />
    <![endif]-->
    <link rel="shortcut icon" href="favicon.ico" />
    <link href="css/bootstrap.min.css?v=3.3.6" rel="stylesheet" />
    <link href="css/font-awesome.min.css?v=4.4.0" rel="stylesheet" />
    <link href="css/animate.css" rel="stylesheet" />
    <link href="css/style.css?v=4.1.0" rel="stylesheet" />
    <style>
      body {
        min-width: 1000px !important;
      }
    </style>
  </head>

  <body
    class="fixed-sidebar full-height-layout gray-bg"
    style="overflow:hidden"
  >
    <div id="wrapper">
      <!--左侧导航开始-->
      <div class="navbar-default navbar-static-side" role="navigation">
        <div class="nav-close"><i class="fa fa-times-circle"></i></div>
        <div class="sidebar-collapse">
          <ul class="nav" id="side-menu">
            <li class="nav-header">
              <div class="dropdown profile-element">
                <span
                  ><img
                    alt="image"
                    class="img-circle"
                    src="img/profile_small.jpg"
                /></span>
                <a href="javascript:;">
                  <span class="clear">
                    <span class="block m-t-xs"
                      ><strong class="font-bold">Beaut-zihan</strong></span
                    >
                    <span class="text-muted text-xs block"
                      >超级管理员<b class="caret"></b
                    ></span>
                  </span>
                </a>
              </div>
              <div class="logo-element">H+</div>
            </li>
          </ul>
        </div>
      </div>
      <!--左侧导航结束-->
      <!--右侧部分开始-->
      <div id="page-wrapper" class="gray-bg dashbard-1">
        <div class="row content-tabs">
          <button class="roll-nav roll-left J_tabLeft">
            <i class="fa fa-backward"></i>
          </button>
          <nav class="page-tabs J_menuTabs">
            <div class="page-tabs-content">
              <a
                href="javascript:;"
                class="active J_menuTab"
                data-id="main.html"
                >首页</a
              >
            </div>
          </nav>
          <button class="roll-nav roll-right J_tabRight">
            <i class="fa fa-forward"></i>
          </button>
          <div class="btn-group roll-nav roll-right">
            <button class="dropdown J_tabClose" data-toggle="dropdown">
              关闭操作<span class="caret"></span>
            </button>
            <ul role="menu" class="dropdown-menu dropdown-menu-right">
              <li class="J_tabShowActive"><a>定位当前选项卡</a></li>
              <li class="divider"></li>
              <li class="J_tabCloseAll"><a>关闭全部选项卡</a></li>
              <li class="J_tabCloseOther"><a>关闭其他选项卡</a></li>
            </ul>
          </div>
          <div class="roll-nav roll-right J_tabExit" onclick="logout()">
            <i class="fa fa fa-sign-out"></i> 退出
          </div>
        </div>
        <div class="row J_mainContent" id="content-main">
          <iframe
            class="J_iframe"
            name="iframe0"
            width="100%"
            height="100%"
            src="main.html?v=4.0"
            frameborder="0"
            data-id="main.html"
            seamless
          ></iframe>
        </div>
      </div>
      <!--右侧部分结束-->
      <!--右侧边栏开始-->
      <div id="right-sidebar">
        <div class="sidebar-container">
          <ul class="nav nav-tabs navs-3">
            <li class="active">
              <a data-toggle="tab" href="#tab-1">
                <i class="fa fa-gear"></i> 主题
              </a>
            </li>
            <li class="">
              <a data-toggle="tab" href="#tab-2">
                通知
              </a>
            </li>
            <li>
              <a data-toggle="tab" href="#tab-3">
                项目进度
              </a>
            </li>
          </ul>

          <div class="tab-content">
            <div id="tab-1" class="tab-pane active">
              <div class="sidebar-title">
                <h3><i class="fa fa-comments-o"></i> 主题设置</h3>
                <small><i class="fa fa-tim"></i> </small>
              </div>
              <div class="skin-setttings">
                <div class="title">主题设置</div>
                <div class="setings-item">
                  <span>收起左侧菜单</span>
                  <div class="switch">
                    <div class="onoffswitch">
                      <input
                        type="checkbox"
                        name="collapsemenu"
                        class="onoffswitch-checkbox"
                        id="collapsemenu"
                      />
                      <label class="onoffswitch-label" for="collapsemenu">
                        <span class="onoffswitch-inner"></span>
                        <span class="onoffswitch-switch"></span>
                      </label>
                    </div>
                  </div>
                </div>
                <div class="setings-item">
                  <span>固定顶部</span>
                  <div class="switch">
                    <div class="onoffswitch">
                      <input
                        type="checkbox"
                        name="fixednavbar"
                        class="onoffswitch-checkbox"
                        id="fixednavbar"
                      />
                      <label class="onoffswitch-label" for="fixednavbar">
                        <span class="onoffswitch-inner"></span>
                        <span class="onoffswitch-switch"></span>
                      </label>
                    </div>
                  </div>
                </div>
                <div class="setings-item">
                  <span>
                    固定宽度
                  </span>
                  <div class="switch">
                    <div class="onoffswitch">
                      <input
                        type="checkbox"
                        name="boxedlayout"
                        class="onoffswitch-checkbox"
                        id="boxedlayout"
                      />
                      <label class="onoffswitch-label" for="boxedlayout">
                        <span class="onoffswitch-inner"></span>
                        <span class="onoffswitch-switch"></span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--右侧边栏结束-->
    </div>
    <!-- 全局js -->
    <script src="js/jquery.min.js?v=2.1.4"></script>
    <script src="js/bootstrap.min.js?v=3.3.6"></script>
    <script src="./js/common.js"></script>
    <script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <script src="js/plugins/layer/layer.min.js"></script>
    <script src="./js/loading.js"></script>
    <!-- 自定义js -->
    <script src="js/hplus.js?v=4.1.0"></script>
    <script type="text/javascript" src="js/contabs.js"></script>
    <!-- 第三方插件 -->
    <script src="js/plugins/pace/pace.min.js"></script>
    <script>
      ajax_data("./testJson/menu.json", { type: "get" }, function(res) {
        var submenu = res.subObj;
        for (let i in submenu) {
          for (let k in submenu[i].obj) {
            submenu[i].obj[k].power =
              submenu[i].subObj[submenu[i].obj[k]["id"]]["subObj"][0];
            submenu[i].obj[k].dispatcherId =
              submenu[i].subObj[submenu[i].obj[k]["id"]]["obj"][0][
                "dispatcherId"
              ];
          }
        }
        console.log(submenu);
        var menu = res.obj;
        for (let n in menu) {
          menu[n].children = submenu[menu[n]["id"]]["obj"];
        }
        console.log(menu);
      });
      let menuAdmin = [
        {
          name: "店铺管理",
          id: "1",
          children: [],
          url: "./component/storeManagement/storeManagement.html"
        },
        {
          name: "库存管理",
          id: "2",
          children: [
            {
              name: "入库",
              id: "2_1",
              url: "./component/inventoryManagement/importInventory.html"
            },
            {
              name: "调拨",
              id: "2_2",
              url: "./component/inventoryManagement/Allocate.html"
            },
            {
              name: "销售记录",
              id: "2_3",
              url: "./component/inventoryManagement/salesRecord.html"
            }
          ],
          url: ""
        },
        {
          name: "人事管理",
          id: "3",
          children: [
            {
              name: "入职",
              id: "3_1",
              url: "./component/personnelManagement/onboarding.html"
            },
            {
              name: "离职",
              id: "3_2",
              url: "./component/personnelManagement/departure.html"
            }
          ],
          url: ""
        },
        {
          name: "开支管理",
          id: "4",
          children: [],
          url: "./component/spendingManagement/spending.html"
        },
        {
          name: "商品管理",
          id: "5",
          children: [],
          url: "./component/commodityManagement/commodity.html"
        },
        {
          name: "统计分析",
          id: "6",
          children: [
            {
              name: "公司",
              id: "6_1",
              url: "./component/reportFormManagement/company.html"
            },
            {
              name: "店铺",
              id: "6_2",
              url: "./component/reportFormManagement/store.html"
            },
            {
              name: "支付情况",
              id: "6_3",
              url: "./component/reportFormManagement/payment.html"
            },
            {
              name: "开支统计",
              id: "6_4",
              url: "./component/reportFormManagement/statisticalSpending.html"
            }
          ],
          url: ""
        },
        {
          name: "配置管理",
          id: "7",
          children: [
            {
              name: "绩效管理",
              id: "7_1",
              url: "./component/configurationManagement/performance.html"
            },
            {
              name: "店铺目标值",
              id: "7_2",
              url: "./component/configurationManagement/storeTarget.html"
            },
            {
              name: "店铺等级",
              id: "7_3",
              url: "./component/configurationManagement/storeGrade.html"
            },
            {
              name:"商品折扣配置",
              id: "7_4",
              url: "./component/configurationManagement/waresDiscount.html"
            }
          ],
          url: ""
        }
      ];

      let menuHtml = ``;
      for (let i = 0; i < menuAdmin.length; i++) {
        function buildChildHtml(childrenList) {
          let childHtml = "";
          if (!childrenList.length) {
            return "";
          } else {
            for (let i in childrenList) {
              childHtml += `
                    <li>
                     <a class="J_menuItem" href="${childrenList[i].url}" data-index="${childrenList[i].id}">${childrenList[i].name}</a>
                    </li>
                    `;
            }
          }
          return childHtml;
        }
        menuHtml += `
                <li>
                    <a class="${
                      menuAdmin[i].children.length > 0 ? "" : "J_menuItem"
                    }" 
                      href="${
                        menuAdmin[i].children.length > 0
                          ? "#"
                          : menuAdmin[i].url
                      }" data-index="${menuAdmin[i].id}">
                        <i class="fa fa fa-bar-chart-o"></i>
                        <span class="nav-label">${menuAdmin[i].name}</span>
                        <span class="fa arrow"></span>
                    </a>
                    ${
                      menuAdmin[i].children.length > 0
                        ? ` <ul class="nav nav-second-level">
                        ${buildChildHtml(menuAdmin[i].children)}
                         </ul>`
                        : ""
                    }
                </li>
                `;
      }
      $("#side-menu").append(menuHtml);

      function logout() {
        ajax_data("./testJson/menu.json", { type: "get" }, function(res) {});
      }
    </script>
  </body>
</html>
